# file: bundles-v20.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Configuration Hub</title>
  <style>
    :root {
      --brand-blue: #1589ee;
      --dark-blue: #16325c;
      --light-gray: #f4f6f9;
      --border-gray: #d8dde6;
      --text-dark: #1a1a1a;
      --text-light: #63737a;
      --font: Arial, sans-serif;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; font-family: var(--font); background: var(--light-gray); color: var(--text-dark); }
    .app-container { display: flex; flex-direction: column; height: 100%; }
    header { background: var(--dark-blue); color: white; padding: 0 1em; display: flex; align-items: center; height: 50px; justify-content: space-between; }
    header h1 { font-size: 1.2em; }
    .body { flex: 1; display: flex; overflow: hidden; }
    nav { width: 220px; background: var(--brand-blue); display: flex; flex-direction: column; }
    nav a { color: white; text-decoration: none; padding: 1em; }
    nav a.active, nav a:hover { background: var(--dark-blue); }
    .main { flex: 1; overflow-y: auto; padding: 1em; }
    .section { display: none; }
    .section.active { display: block; }
    .card { background: white; border: 1px solid var(--border-gray); border-radius: 4px; padding: 1em; margin-bottom: 1em; }
    h2 { margin-bottom: 0.5em; color: var(--dark-blue); }
    label { display: block; margin: 0.5em 0 0.25em; font-weight: bold; }
    input[type="text"], textarea, select, input[type="number"], input[type="date"], input[type="url"], input[type="datetime-local"] { width: 100%; padding: 0.5em; border: 1px solid var(--border-gray); border-radius: 3px; }
    textarea { resize: vertical; height: 80px; }
    button { margin-top: 0.5em; background: var(--brand-blue); color: white; border: none; padding: 0.5em 1em; border-radius: 3px; cursor: pointer; }
    button.delete { background: #d9534f; margin-left: 0.5em; }
    button.update { background: #ffc107; color: #1a1a1a; margin-left: 0.5em;}
    table { width: 100%; border-collapse: collapse; margin-top: 0.5em; }
    th, td { border: 1px solid var(--border-gray); padding: 0.5em; text-align: left; }
    th { background: var(--light-gray); }
    .search-input { width: calc(100% - 2px); margin-bottom: 0.5em; }
    .wizard-overlay { position: fixed; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.4); display: none; align-items: center; justify-content: center; }
    .wizard-content { background: white; padding: 1em; border-radius: 5px; width: 600px; max-height: 90%; overflow-y: auto; }
    .wizard-step { display: none; }
    .wizard-step.active { display: block; }
    .wizard-buttons { text-align: right; margin-top: 1em; }
    .wizard-buttons button { margin-left: 0.5em; }
    .order-list { list-style: none; padding: 0; }
    .order-list li { margin: 0.25em 0; display: flex; justify-content: space-between; align-items: center; background: var(--light-gray); padding: 0.5em; border-radius: 3px; }
    .order-btn { background: transparent; border: none; cursor: pointer; color: var(--brand-blue); margin-left: 0.5em; }
    .error { color: #d9534f; font-size: 0.9em; margin-top: 0.25em; }
    .flex { display: flex; gap:1em; }
    .flex-column { display: flex; flex-direction: column; }
  </style>
</head>
<body>
  <div class="app-container">
    <header>
      <h1>Configuration Hub</h1>
      <div>User: admin | <a href="#" style="color:white;text-decoration:underline;">Logout</a></div>
    </header>
    <div class="body">
      <nav>
        <a href="#" data-target="submission-library" class="active">Submission Form Library</a>
        <a href="#" data-target="review-library">Review Form Library</a>
        <a href="#" data-target="cohorts">Cohorts</a>
        <a href="#" data-target="bundles">Submission Bundles</a>
        <a href="#" data-target="bundles">Review Bundles</a>
        <a href="#" data-target="deliverables">Deliverables</a>
      </nav>
      <div class="main">
        <section id="submission-library" class="section active">
          <h2>Manage Submission Form Library</h2>
          <button id="open-lib-wizard">New Submission Form</button>
          <button id="delete-selected-sub">Delete Selected</button>
          <div class="card">
            <label for="submission-grid-search">Search Forms</label>
            <input type="text" id="submission-grid-search" class="search-input" placeholder="Search...">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="sub-select-all"></th>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Endpoint URL</th>
                  <th>Exit Event</th>
                  <th>API Auth Type</th>
                  <th>APIs Features</th>
                  <th>Schema (YAML)</th>
                  <th>Validation Status</th>
                  <th>Options</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="submission-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="review-library" class="section">
          <h2>Manage Review Form Library</h2>
          <button id="open-rlib-wizard">New Review Form</button>
          <button id="delete-selected-rev">Delete Selected</button>
          <div class="card">
            <label for="review-grid-search">Search Forms</label>
            <input type="text" id="review-grid-search" class="search-input" placeholder="Search...">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="rev-select-all"></th>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Endpoint URL</th>
                  <th>Exit Event</th>
                  <th>API Auth Type</th>
                  <th>APIs Features</th>
                  <th>Schema (YAML)</th>
                  <th>Validation Status</th>
                  <th>Options</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="review-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="cohorts" class="section">
          <h2>Manage Cohorts</h2>
          <button id="open-cohort-wizard">New Cohort</button>
          <button id="delete-selected-cohort">Delete Selected</button>
          <div class="card">
            <table>
              <thead><tr><th><input type="checkbox" id="cohort-select-all"></th><th>Name</th><th>Description</th><th>Tags</th><th>Program</th><th>Entity Type</th><th># Entities</th><th>Actions</th></tr></thead>
              <tbody id="cohort-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="bundles" class="section">
          <h2>Manage Bundles</h2>
          <button id="open-bundle-wizard">New Bundle</button>
          <button id="delete-selected-bundle">Delete Selected</button>
          <div class="card">
            <label for="bundle-grid-search">Search Bundles</label>
            <input type="text" id="bundle-grid-search" class="search-input" placeholder="Search bundles...">
            <table>
              <thead><tr><th><input type="checkbox" id="bundle-select-all"></th><th>Name</th><th>Description</th><th>Program</th><th>Tags</th><th># Submission Forms</th><th>Review Enabled</th><th># Review Forms</th><th>Actions</th></tr></thead>
              <tbody id="bundle-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="deliverables" class="section">
          <h2>Manage Deliverables</h2>
          <button id="open-deliverable-wizard">New Deliverable</button>
          <button id="delete-selected-del">Delete Selected</button>
          <div class="card">
            <label for="deliverable-grid-search">Search Deliverables</label>
            <input type="text" id="deliverable-grid-search" class="search-input" placeholder="Search...">
            <table>
              <thead><tr><th><input type="checkbox" id="del-select-all"></th><th>Name</th><th>Cohort</th><th>Bundle</th><th>Schedule</th><th>Next Run</th><th>Status</th><th>Actions</th></tr></thead>
              <tbody id="deliverable-grid"></tbody>
            </table>
          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- Wizards omitted for brevity; identical to existing code -->

  <script>
    document.querySelectorAll('nav a').forEach(a=>{
      a.onclick=e=>{
        e.preventDefault();
        document.querySelectorAll('nav a').forEach(x=>x.classList.remove('active'));
        a.classList.add('active');
        document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
        document.getElementById(a.dataset.target).classList.add('active');
      };
    });

    // Data Stores
    const defaultFeatures = 'Create Draft, Update Draft, Publish, List Forms, Get Form Details, Delete Form, List Versions, Get Version Details, Restore Version, Health';
    const submissionLibrary = [
      {id:'1',name:'Form 1A',description:'',exitEvent:'',endpoint:'https://api.example.com/forms/1A',auth:'API Key',apiFeatures:defaultFeatures,schema:'form1A-schema.json',lastValidationStatus:'Passed'},
      {id:'2',name:'Consolidated Budget',description:'',exitEvent:'',endpoint:'https://api.example.com/forms/budget',auth:'OAuth2',apiFeatures:defaultFeatures,schema:'budget-schema.json',lastValidationStatus:'Passed'},
      {id:'3',name:'BPHC Post Award Progress Report (FQHC)',description:'',exitEvent:'',endpoint:'https://api.hrsa.gov/forms/bphc-progress',auth:'API Key',apiFeatures:defaultFeatures,schema:'bphc-progress-schema-v1.json',lastValidationStatus:'Pending'},
      {id:'4',name:'Emergency Prep Report',description:'',exitEvent:'',endpoint:'https://api.example.com/forms/emergency',auth:'OAuth2',apiFeatures:defaultFeatures,schema:'emergency-schema.json',lastValidationStatus:'Failed'}
    ];
    const reviewLibrary = [
      {id:'1',name:'Scope PO Review',description:'',exitEvent:'',endpoint:'https://api.example.com/reviews/scope-po',auth:'API Key',apiFeatures:defaultFeatures,schema:'scope-po-schema.json',lastValidationStatus:'Passed'},
      {id:'2',name:'Environmental Review',description:'',exitEvent:'',endpoint:'https://api.example.com/reviews/environmental',auth:'OAuth2',apiFeatures:defaultFeatures,schema:'env-schema.json',lastValidationStatus:'Pending'},
      {id:'3',name:'BPHC Progress Review',description:'',exitEvent:'',endpoint:'https://api.hrsa.gov/reviews/bphc-progress',auth:'API Key',apiFeatures:defaultFeatures,schema:'bphc-review-schema-v1.json',lastValidationStatus:'Passed'}
    ];
    const dataStore = {
      330:{applications:['App1','App2'],awards:['Award1'],organizations:['Org1','Org2','Org3']},
      LGP:{applications:['LGP App1'],awards:['LGP Award1'],organizations:['LGP Org1']},
      LAL:{applications:['LAL App1'],awards:['LAL Award1'],organizations:['LAL Org1']}
    };
    let cohorts = [
      {id:'c1',name:'FQHC Grantees 330',desc:'Federally Qualified Health Center grantees under Section 330',tags:'HRSA,BPHC,330',program:'330',type:'organizations',entities:dataStore['330']['organizations']},
      {id:'c2',name:'Look-Alike Grantees',desc:'HRSA Look-Alike program grantees',tags:'HRSA,BPHC,LAL',program:'LAL',type:'organizations',entities:dataStore['LAL']['organizations']}
    ];
    let bundles = [
      {id:'b1',name:'HRSA Progress Report Bundle',desc:'Submission and review for HRSA BPHC Post Award Progress Reports',program:'330',tags:'ProgressReport,BPHC',submissionForms:['BPHC Post Award Progress Report (FQHC)'],reviewEnabled:true,reviewForms:['BPHC Progress Review']},
      {id:'b2',name:'Emergency Prep Bundle',desc:'Bundle for emergency preparedness report',program:'330',tags:'Emergency,BPHC',submissionForms:['Emergency Prep Report'],reviewEnabled:false,reviewForms:[]}
    ];
    let deliverables = [
      {id:'d1',name:'July Progress Report',cohort:'FQHC Grantees 330',bundle:'HRSA Progress Report Bundle',schedule:'Recurring (0 0 1 */3 *)',nextRun:'2024-07-01',lastRunStatus:'Pending'},
      {id:'d2',name:'One-time Emergency Prep',cohort:'FQHC Grantees 330',bundle:'Emergency Prep Bundle',schedule:'One-time (2024-06-15)',nextRun:'2024-06-15',lastRunStatus:'Scheduled'}
    ];

    function renderGrid(grid, data, cols){
      grid.innerHTML='';
      data.forEach(item=>{
        const tr=document.createElement('tr');
        let html=`<td><input type="checkbox" data-name="${item.name}"></td>`;
        cols.forEach(c=>{
          const v=typeof c==='function'?c(item):item[c]||'';
          html+=`<td>${v}</td>`;
        });
        html+=`<td><button class="update" data-name="${item.name}">Update</button><button class="delete" data-name="${item.name}">Delete</button></td>`;
        tr.innerHTML=html; grid.appendChild(tr);
      });
    }

    // Submission
    const subGrid=document.getElementById('submission-grid'), subSearch=document.getElementById('submission-grid-search'), deleteSelectedSub=document.getElementById('delete-selected-sub');
    function renderSubmissionLibrary(){
      const q=subSearch.value.toLowerCase();
      const filtered=submissionLibrary.filter(f=>f.name.toLowerCase().includes(q));
      renderGrid(subGrid,filtered,[
        'name',
        item=>item.description,
        'endpoint',
        item=>item.exitEvent,
        'auth',
        item=>item.apiFeatures,
        item=>item.schema,
        item=>item.lastValidationStatus,
        ()=>''
      ]);
      deleteSelectedSub.disabled=true; document.getElementById('sub-select-all').checked=false;
      subGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.onchange=()=>deleteSelectedSub.disabled=!subGrid.querySelectorAll('input[type="checkbox"]:checked').length);
      subGrid.querySelectorAll('.delete').forEach(btn=>{
        btn.onclick=()=>{const n=btn.dataset.name; if(confirm(`Delete submission form "${n}"?`)){const i=submissionLibrary.findIndex(x=>x.name===n);submissionLibrary.splice(i,1);renderSubmissionLibrary();}};
      });
      subGrid.querySelectorAll('.update').forEach(btn=>btn.onclick=()=>openLibWizard('edit',btn.dataset.name));
    }
    subSearch.oninput=renderSubmissionLibrary; renderSubmissionLibrary();
    document.getElementById('sub-select-all').onclick=e=>{subGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.checked=e.target.checked);deleteSelectedSub.disabled=!e.target.checked;};
    deleteSelectedSub.onclick=()=>{
      const sel=Array.from(subGrid.querySelectorAll('input[type="checkbox"]:checked')).map(cb=>cb.dataset.name);
      if(sel.length&&confirm(`Delete ${sel.length} selected?`)){sel.forEach(n=>{const i=submissionLibrary.findIndex(x=>x.name===n);submissionLibrary.splice(i,1);});renderSubmissionLibrary();}
    };

    // Review
    const revGrid=document.getElementById('review-grid'), revSearch=document.getElementById('review-grid-search'), deleteSelectedRev=document.getElementById('delete-selected-rev');
    function renderReviewLibrary(){
      const q=revSearch.value.toLowerCase();
      const filtered=reviewLibrary.filter(f=>f.name.toLowerCase().includes(q));
      renderGrid(revGrid,filtered,[
        'name',
        item=>item.description,
        'endpoint',
        item=>item.exitEvent,
        'auth',
        item=>item.apiFeatures,
        item=>item.schema,
        item=>item.lastValidationStatus,
        ()=>''
      ]);
      deleteSelectedRev.disabled=true; document.getElementById('rev-select-all').checked=false;
      revGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.onchange=()=>deleteSelectedRev.disabled=!revGrid.querySelectorAll('input[type="checkbox"]:checked').length);
      revGrid.querySelectorAll('.delete').forEach(btn=>{btn.onclick=()=>{const n=btn.dataset.name;if(confirm(`Delete review "${n}"?`)){const i=reviewLibrary.findIndex(x=>x.name===n);reviewLibrary.splice(i,1);renderReviewLibrary();}}});
      revGrid.querySelectorAll('.update').forEach(btn=>btn.onclick=()=>openRLibWizard('edit',btn.dataset.name));
    }
    revSearch.oninput=renderReviewLibrary; renderReviewLibrary();
    document.getElementById('rev-select-all').onclick=e=>{revGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.checked=e.target.checked);deleteSelectedRev.disabled=!e.target.checked;};
    deleteSelectedRev.onclick=()=>{
      const sel=Array.from(revGrid.querySelectorAll('input[type="checkbox"]:checked')).map(cb=>cb.dataset.name);
      if(sel.length&&confirm(`Delete ${sel.length} selected?`)){sel.forEach(n=>{const i=reviewLibrary.findIndex(x=>x.name===n);reviewLibrary.splice(i,1);});renderReviewLibrary();}
    };

    // Cohorts, Bundles, Deliverables and Wizard logic remain unchanged
    // ...
  </script>
</body>
</html>