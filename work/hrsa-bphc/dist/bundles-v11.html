# file: index.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Configuration Hub</title>
  <style>
    :root {
      --brand-blue: #1589ee;
      --dark-blue: #16325c;
      --light-gray: #f4f6f9;
      --border-gray: #d8dde6;
      --text-dark: #1a1a1a;
      --text-light: #63737a;
      --font: Arial, sans-serif;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; font-family: var(--font); background: var(--light-gray); color: var(--text-dark); }
    .app-container { display: flex; flex-direction: column; height: 100%; }
    header { background: var(--dark-blue); color: white; padding: 0 1em; display: flex; align-items: center; height: 50px; }
    header h1 { font-size: 1.2em; }
    .body { flex: 1; display: flex; overflow: hidden; }
    nav { width: 200px; background: var(--brand-blue); display: flex; flex-direction: column; }
    nav a { color: white; text-decoration: none; padding: 1em; }
    nav a.active, nav a:hover { background: var(--dark-blue); }
    .main { flex: 1; overflow-y: auto; padding: 1em; }
    .section { display: none; }
    .section.active { display: block; }
    .card { background: white; border: 1px solid var(--border-gray); border-radius: 4px; padding: 1em; margin-bottom: 1em; }
    h2 { margin-bottom: 0.5em; color: var(--dark-blue); }
    h3 { margin-bottom: 0.5em; color: var(--brand-blue); }
    label { display: block; margin: 0.5em 0 0.25em; font-weight: bold; }
    input[type="text"], textarea, select { width: 100%; padding: 0.5em; border: 1px solid var(--border-gray); border-radius: 3px; }
    textarea { resize: vertical; height: 80px; }
    button { margin-top: 0.5em; background: var(--brand-blue); color: white; border: none; padding: 0.5em 1em; border-radius: 3px; cursor: pointer; }
    button.delete { background: #d9534f; margin-left: 0.5em; }
    table { width: 100%; border-collapse: collapse; margin-top: 0.5em; }
    th, td { border: 1px solid var(--border-gray); padding: 0.5em; text-align: left; }
    th { background: var(--light-gray); }
    .search-input { width: calc(100% - 2px); margin-bottom: 0.5em; }
    .remove-btn { background: transparent; color: #d9534f; border: none; cursor: pointer; }
    .wizard-overlay { position: fixed; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.4); display: none; align-items: center; justify-content: center; }
    .wizard-content { background: white; padding: 1em; border-radius: 5px; width: 600px; max-height: 90%; overflow-y: auto; }
    .wizard-step { display: none; }
    .wizard-step.active { display: block; }
    .wizard-buttons { text-align: right; margin-top: 1em; }
    .wizard-buttons button { margin-left: 0.5em; }
    .config-section { border: 1px solid var(--border-gray); padding: 0.5em; margin-bottom: 0.5em; border-radius: 3px; }
    .config-section input { width: calc(100% - 60px); display: inline-block; }
    .config-section button { width: 50px; display: inline-block; }
  </style>
</head>
<body>
  <div class="app-container">
    <header><h1>Configuration Hub <!-- bundles-v9 --></h1></header>
    <div class="body">
      <nav>
        <a href="#" data-target="cohorts" class="active">Cohorts</a>
        <a href="#" data-target="submission-bundles">Submission Bundles</a>
        <a href="#" data-target="review-bundles">Review Bundles</a>
        <a href="#" data-target="submission-library">Submission Library</a>
        <a href="#" data-target="review-library">Review Library</a>
        <a href="#" data-target="deliverables">Deliverables</a>
      </nav>
      <div class="main">
        <section id="cohorts" class="section active">
          <h2>Cohorts</h2>
          <div class="card">
            <label for="cohort-name">Cohort Name</label>
            <input type="text" id="cohort-name" placeholder="Enter cohort name">
            <label for="cohort-desc">Description</label>
            <textarea id="cohort-desc" placeholder="Enter a description"></textarea>
            <label for="cohort-tags">Tags (comma-separated)</label>
            <input type="text" id="cohort-tags" placeholder="e.g., rural, pilot">
            <label for="cohort-program">Program</label>
            <select id="cohort-program">
              <option value="">-- select program --</option>
              <option value="330">FQHC 330</option>
              <option value="LGP">Loan Guarantee Program</option>
              <option value="LAL">Look-Alike Program</option>
            </select>
            <label for="cohort-type">Entity Type</label>
            <select id="cohort-type">
              <option value="">-- select entity type --</option>
              <option value="applications">Applications</option>
              <option value="awards">Awards</option>
              <option value="organizations">Organizations</option>
            </select>
            <label for="cohort-entities">Entities</label>
            <select id="cohort-entities" multiple size="5"></select>
            <button id="add-cohort">Create Cohort</button>
          </div>
          <div class="card">
            <h3>Current Cohorts</h3>
            <table>
              <thead>
                <tr><th>Name</th><th>Program</th><th>Type</th><th>Entities</th><th>Tags</th><th>Actions</th></tr>
              </thead>
              <tbody id="cohort-list"></tbody>
            </table>
          </div>
        </section>
        <section id="submission-bundles" class="section">
          <h2>Submission Bundles</h2>
          <div class="card">
            <button id="open-sb-wizard">Create Bundle (Wizard)</button>
          </div>
          <div class="card">
            <label for="submission-bundle-grid-search">Search Bundles</label>
            <input type="text" id="submission-bundle-grid-search" class="search-input" placeholder="Search bundles...">
            <table>
              <thead><tr><th>Name</th><th>Forms</th><th>Actions</th></tr></thead>
              <tbody id="submission-bundle-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="review-bundles" class="section">
          <h2>Review Bundles</h2>
          <div class="card">
            <button id="open-rb-wizard">Create Review Bundle (Wizard)</button>
          </div>
          <div class="card">
            <label for="review-bundle-grid-search">Search Bundles</label>
            <input type="text" id="review-bundle-grid-search" class="search-input" placeholder="Search bundles...">
            <table>
              <thead><tr><th>Name</th><th>Reviews</th><th>Actions</th></tr></thead>
              <tbody id="review-bundle-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="submission-library" class="section">
          <h2>Submission Library</h2>
          <div class="card">
            <label for="submission-grid-search">Search Submissions</label>
            <input type="text" id="submission-grid-search" class="search-input" placeholder="Search submissions...">
            <table>
              <thead><tr><th>Form Name</th><th>Description</th></tr></thead>
              <tbody id="submission-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="review-library" class="section">
          <h2>Review Library</h2>
          <div class="card">
            <label for="review-grid-search">Search Reviews</label>
            <input type="text" id="review-grid-search" class="search-input" placeholder="Search reviews...">
            <table>
              <thead><tr><th>Review Name</th><th>Description</th></tr></thead>
              <tbody id="review-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="deliverables" class="section">
          <h2>Deliverables</h2>
          <div class="card">
            <label for="deliverable-name">Deliverable Name</label>
            <input type="text" id="deliverable-name" placeholder="Enter deliverable name">
            <label for="deliverable-cohort">Select Cohort</label>
            <select id="deliverable-cohort"><option value="">-- select cohort --</option></select>
            <label for="deliverable-bundle">Select Submission Bundle</label>
            <select id="deliverable-bundle"><option value="">-- select bundle --</option></select>
            <button id="create-deliverable">Create Deliverable</button>
          </div>
          <div class="card">
            <label for="deliverable-grid-search">Search Deliverables</label>
            <input type="text" id="deliverable-grid-search" class="search-input" placeholder="Search deliverables...">
            <table>
              <thead><tr><th>Name</th><th>Cohort</th><th>Bundle</th><th>Actions</th></tr></thead>
              <tbody id="deliverable-grid"></tbody>
            </table>
          </div>
        </section>
      </div>
    </div>
  </div>

  <div id="wizard-overlay" class="wizard-overlay">
    <div class="wizard-content">
      <div id="step-1" class="wizard-step active">
        <h3>Step 1: Basic Info</h3>
        <label for="wiz-name">Bundle Name</label>
        <input type="text" id="wiz-name">
        <label for="wiz-desc">Description</label>
        <textarea id="wiz-desc"></textarea>
      </div>
      <div id="step-2" class="wizard-step">
        <h3>Step 2: Select Forms</h3>
        <label for="wiz-search">Search</label>
        <input type="text" id="wiz-search" class="search-input">
        <div id="wiz-list" style="max-height:200px;overflow-y:auto;"></div>
      </div>
      <div id="step-3" class="wizard-step">
        <h3>Step 3: Configure Forms</h3>
        <div id="wiz-config"></div>
      </div>
      <div class="wizard-buttons">
        <button id="wiz-prev">Back</button>
        <button id="wiz-next">Next</button>
        <button id="wiz-finish">Finish</button>
        <button id="wiz-cancel">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    document.querySelectorAll('nav a').forEach(link=>{
      link.onclick=e=>{
        e.preventDefault();
        document.querySelectorAll('nav a').forEach(a=>a.classList.remove('active'));
        link.classList.add('active');
        document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
        document.getElementById(link.dataset.target).classList.add('active');
      };
    });

    const dataStore = {
      330: { applications:['App A1','App A2','App A3','App A4'], awards:['Award A1','Award A2'], organizations:['Org A','Org B','Org C'] },
      LGP:{ applications:['LGP App1','LGP App2'], awards:['LGP Award1','LGP Award2'], organizations:['LGP Org1'] },
      LAL:{ applications:['LAL App1','LAL App2'], awards:['LAL Award1','LAL Award2','LAL Award3'], organizations:['LAL Org1'] }
    };

    let cohorts=[
      {name:'East Awards',desc:'Cohort for east region awards',tags:'east,2025',program:'330',type:'awards',entities:['Award A1']},
      {name:'West Apps',desc:'Cohort for west region applicants',tags:'west,app',program:'LGP',type:'applications',entities:['LGP App1']},
      {name:'Central Orgs',desc:'Central region organizations',tags:'central,org',program:'LAL',type:'organizations',entities:['LAL Org1']},
      {name:'North Mix',desc:'Mixed cohort',tags:'north,mix',program:'330',type:'applications',entities:['App A1','App A2']},
      {name:'Pilot Users',desc:'Pilot cohort users',tags:'pilot,rural',program:'LAL',type:'awards',entities:['LAL Award1']}
    ];
    const progSel=document.getElementById('cohort-program'), typeSel=document.getElementById('cohort-type'), entSel=document.getElementById('cohort-entities'), cohortList=document.getElementById('cohort-list');
    function populateEntities(){
      entSel.innerHTML='';
      const p=progSel.value,t=typeSel.value;
      if(dataStore[p]&&dataStore[p][t]) dataStore[p][t].forEach(item=>{
        const o=document.createElement('option');o.value=item;o.textContent=item;entSel.appendChild(o);
      });
    }
    progSel.onchange=typeSel.onchange=populateEntities;
    document.getElementById('add-cohort').onclick=()=>{
      const name=document.getElementById('cohort-name').value.trim();
      const desc=document.getElementById('cohort-desc').value.trim();
      const tags=document.getElementById('cohort-tags').value.trim();
      const program=progSel.value,type=typeSel.value;
      const entities=Array.from(entSel.selectedOptions).map(o=>o.value);
      if(name&&program&&type&&entities.length){
        cohorts.push({name,desc,tags,program,type,entities});
        renderCohorts(); updateDeliverableSelects();
        ['cohort-name','cohort-desc','cohort-tags'].forEach(id=>document.getElementById(id).value='');
        progSel.value='';typeSel.value='';entSel.innerHTML='';
      }
    };
    function renderCohorts(){
      cohortList.innerHTML='';
      cohorts.forEach((c,i)=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${c.name}</td><td>${c.program}</td><td>${c.type}</td><td>${c.entities.join(', ')}</td><td>${c.tags}</td><td><button class="remove-btn" data-i="${i}">Delete</button></td>`;
        cohortList.appendChild(tr);
      });
      cohortList.querySelectorAll('.remove-btn').forEach(btn=>{
        btn.onclick=()=>{
          cohorts.splice(btn.dataset.i,1); renderCohorts(); updateDeliverableSelects();
        };
      });
    }

    const submissionLibrary=[
      {name:'Form 1A',desc:'General Info Worksheet'},{name:'Form 5A',desc:'Site Details Form'},
      {name:'Form 5B',desc:'Services Details Form'},{name:'Form 5C',desc:'Activities Form'},
      {name:'Assurances',desc:'Legal Assurances Document'},{name:'Consolidated Budget',desc:'Budget Summary'},
      {name:'Site Map',desc:'Site Layout Document'}
    ];
    const reviewLibrary=[
      {name:'Scope PO Review',desc:'Project Officer scope validation'},
      {name:'Scope PQC Review',desc:'Quality control review for scope'},
      {name:'TAR Checklist',desc:'Technical/Admin Review checklist'},
      {name:'GAR Recommendation',desc:'Grant Award Review Recommendation'},
      {name:'PQC Final Review',desc:'Final quality control review'},
      {name:'Compliance Check',desc:'Compliance condition verification'}
    ];
    let submissionBundles=[
      {name:'Initial Scope Bundle',forms:['Form 5A','Form 5B','Form 5C']},
      {name:'Progress Report Bundle',forms:['Form 1A','Assurances']},
      {name:'Budget & Documents',forms:['Consolidated Budget','Assurances']},
      {name:'Site Details Bundle',forms:['Form 5A','Site Map']},
      {name:'Compliance Bundle',forms:['Assurances']}
    ];
    let reviewBundles=[
      {name:'Scope Review Bundle',forms:['Scope PO Review','Scope PQC Review']},
      {name:'Technical Review Bundle',forms:['TAR Checklist','GAR Recommendation']},
      {name:'Compliance Review',forms:['Compliance Check']},
      {name:'Final QC Bundle',forms:['PQC Final Review','Compliance Check']},
      {name:'Full Review',forms:['Scope PO Review','Scope PQC Review','TAR Checklist','GAR Recommendation','Compliance Check']}
    ];
    let deliverables=[
      {name:'2025 Q1 Report',cohort:'East Awards',bundle:'Progress Report Bundle'},
      {name:'Site Expansion',cohort:'West Apps',bundle:'Initial Scope Bundle'},
      {name:'Budget Revision',cohort:'Central Orgs',bundle:'Budget & Documents'},
      {name:'Compliance Update',cohort:'Pilot Users',bundle:'Compliance Bundle'},
      {name:'Annual Audit',cohort:'North Mix',bundle:'Full Review'}
    ];

    const sbGrid=document.getElementById('submission-bundle-grid'), sbGridSearch=document.getElementById('submission-bundle-grid-search');
    function renderSubmissionBundles(){
      sbGrid.innerHTML='';
      const q=sbGridSearch.value.toLowerCase();
      submissionBundles.filter(b=>b.name.toLowerCase().includes(q)).forEach((b,i)=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${b.name}</td><td>${b.forms.join(', ')}</td><td><button class="remove-btn" data-i="${i}">Delete</button></td>`;
        sbGrid.appendChild(tr);
      });
      sbGrid.querySelectorAll('.remove-btn').forEach(btn=>{
        btn.onclick=()=>{
          submissionBundles.splice(btn.dataset.i,1); renderSubmissionBundles(); updateDeliverableSelects();
        };
      });
    }
    sbGridSearch.oninput=renderSubmissionBundles;

    const rbGrid=document.getElementById('review-bundle-grid'), rbGridSearch=document.getElementById('review-bundle-grid-search');
    function renderReviewBundles(){
      rbGrid.innerHTML='';
      const q=rbGridSearch.value.toLowerCase();
      reviewBundles.filter(b=>b.name.toLowerCase().includes(q)).forEach((b,i)=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${b.name}</td><td>${b.forms.join(', ')}</td><td><button class="remove-btn" data-i="${i}">Delete</button></td>`;
        rbGrid.appendChild(tr);
      });
      rbGrid.querySelectorAll('.remove-btn').forEach(btn=>{
        btn.onclick=()=>{
          reviewBundles.splice(btn.dataset.i,1); renderReviewBundles();
        };
      });
    }
    rbGridSearch.oninput=renderReviewBundles;

    const subGrid=document.getElementById('submission-grid'), subSearch=document.getElementById('submission-grid-search');
    function renderSubmission(){
      subGrid.innerHTML='';
      const q=subSearch.value.toLowerCase();
      submissionLibrary.filter(f=>f.name.toLowerCase().includes(q)||f.desc.toLowerCase().includes(q)).forEach(f=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${f.name}</td><td>${f.desc}</td>`;
        subGrid.appendChild(tr);
      });
    }
    subSearch.oninput=renderSubmission; renderSubmission();

    const revGrid=document.getElementById('review-grid'), revSearch=document.getElementById('review-grid-search');
    function renderReview(){
      revGrid.innerHTML='';
      const q=revSearch.value.toLowerCase();
      reviewLibrary.filter(r=>r.name.toLowerCase().includes(q)||r.desc.toLowerCase().includes(q)).forEach(r=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${r.name}</td><td>${r.desc}</td>`;
        revGrid.appendChild(tr);
      });
    }
    revSearch.oninput=renderReview; renderReview();

    const delGrid=document.getElementById('deliverable-grid'), delSearch=document.getElementById('deliverable-grid-search');
    const delCohort=document.getElementById('deliverable-cohort'), delBundle=document.getElementById('deliverable-bundle');
    function updateDeliverableSelects(){
      delCohort.innerHTML='<option value="">-- select cohort --</option>';
      cohorts.forEach(c=>delCohort.appendChild(new Option(c.name,c.name)));
      delBundle.innerHTML='<option value="">-- select bundle --</option>';
      submissionBundles.forEach(b=>delBundle.appendChild(new Option(b.name,b.name)));
    }
    updateDeliverableSelects();
    document.getElementById('create-deliverable').onclick=()=>{
      const name=document.getElementById('deliverable-name').value.trim(), cohort=delCohort.value, bundle=delBundle.value;
      if(name&&cohort&&bundle){
        deliverables.push({name,cohort,bundle});
        renderDeliverables();
        document.getElementById('deliverable-name').value=''; delCohort.value=''; delBundle.value='';
      }
    };
    function renderDeliverables(){
      delGrid.innerHTML='';
      const q=delSearch.value.toLowerCase();
      deliverables.filter(d=>d.name.toLowerCase().includes(q)||d.cohort.toLowerCase().includes(q)||d.bundle.toLowerCase().includes(q))
      .forEach((d,i)=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${d.name}</td><td>${d.cohort}</td><td>${d.bundle}</td><td><button class="remove-btn" data-i="${i}">Delete</button></td>`;
        delGrid.appendChild(tr);
      });
      delGrid.querySelectorAll('.remove-btn').forEach(btn=>{
        btn.onclick=()=>{
          deliverables.splice(btn.dataset.i,1); renderDeliverables();
        };
      });
    }
    delSearch.oninput=renderDeliverables; renderDeliverables();

    // Wizard logic
    let wiz={step:1,name:'',desc:'',selected:[],type:'',config:{}};
    const overlay=document.getElementById('wizard-overlay');
    const steps=[1,2,3];
    function showStep(){
      steps.forEach(s=>document.getElementById('step-'+s).classList.remove('active'));
      document.getElementById('step-'+wiz.step).classList.add('active');
      document.getElementById('wiz-prev').style.display=wiz.step>1?'inline-block':'none';
      document.getElementById('wiz-next').style.display=wiz.step<3?'inline-block':'none';
      document.getElementById('wiz-finish').style.display=wiz.step===3?'inline-block':'none';
      if(wiz.step===2) populateWizardList();
      if(wiz.step===3) populateWizardConfig();
    }
    document.getElementById('open-sb-wizard').onclick=()=>{
      wiz={step:1,name:'',desc:'',selected:[],type:'submission',config:{}};
      overlay.style.display='flex'; document.getElementById('wiz-name').value=''; document.getElementById('wiz-desc').value='';
      showStep();
    };
    document.getElementById('open-rb-wizard').onclick=()=>{
      wiz={step:1,name:'',desc:'',selected:[],type:'review',config:{}};
      overlay.style.display='flex'; document.getElementById('wiz-name').value=''; document.getElementById('wiz-desc').value='';
      showStep();
    };
    document.getElementById('wiz-cancel').onclick=()=>{
      overlay.style.display='none';
    };
    document.getElementById('wiz-next').onclick=()=>{
      if(wiz.step===1){
        wiz.name=document.getElementById('wiz-name').value.trim();
        wiz.desc=document.getElementById('wiz-desc').value.trim();
        if(!wiz.name){ alert('Enter a name'); return; }
      }
      if(wiz.step<3) wiz.step++; showStep();
    };
    document.getElementById('wiz-prev').onclick=()=>{
      if(wiz.step>1) wiz.step--; showStep();
    };
    function populateWizardList(){
      const list=document.getElementById('wiz-list'), search=document.getElementById('wiz-search');
      list.innerHTML=''; search.value=''; search.oninput=filterList;
      filterList();
      function filterList(){
        const q=search.value.toLowerCase();
        const lib = wiz.type==='submission'?submissionLibrary:reviewLibrary;
        lib.filter(f=>f.name.toLowerCase().includes(q)||f.desc.toLowerCase().includes(q))
        .forEach(f=>{
          const div=document.createElement('div');
          div.innerHTML=`<label><input type="checkbox" value="${f.name}" ${wiz.selected.includes(f.name)?'checked':''}> ${f.name} - ${f.desc}</label>`;
          list.appendChild(div);
        });
      }
    }
    document.getElementById('wiz-finish').onclick=()=>{
      const checked=Array.from(document.querySelectorAll('#wiz-list input:checked')).map(i=>i.value);
      if(!checked.length){ alert('Select at least one'); return; }
      wiz.selected=checked;
      // create bundle
      const bundle={name:wiz.name,forms:wiz.selected};
      if(wiz.type==='submission'){ submissionBundles.push(bundle); renderSubmissionBundles(); }
      else { reviewBundles.push(bundle); renderReviewBundles(); }
      updateDeliverableSelects();
      overlay.style.display='none';
    };
    function populateWizardConfig(){
      const cfg=document.getElementById('wiz-config');
      cfg.innerHTML='';
      wiz.selected.forEach(name=>{
        const sect=document.createElement('div');
        sect.className='config-section';
        sect.innerHTML=`<strong>${name}</strong><br><button class="add-sec" data-name="${name}">Add Section</button><div class="sec-list" data-name="${name}"></div>`;
        cfg.appendChild(sect);
        wiz.config[name]=wiz.config[name]||[];
        renderSections(name);
      });
      cfg.querySelectorAll('.add-sec').forEach(btn=>{
        btn.onclick=()=>{
          const name=btn.dataset.name;
          wiz.config[name].push('New Section');
          renderSections(name);
        };
      });
      function renderSections(name){
        const list=cfg.querySelector(`.sec-list[data-name="${name}"]`);
        list.innerHTML='';
        wiz.config[name].forEach((sec,i)=>{
          const div=document.createElement('div');
          div.innerHTML=`<input data-name="${name}" data-i="${i}" value="${sec}"><button data-name="${name}" data-i="${i}">X</button>`;
          list.appendChild(div);
        });
        list.querySelectorAll('input').forEach(input=>{
          input.onchange=()=>{
            wiz.config[input.dataset.name][input.dataset.i]=input.value;
          };
        });
        list.querySelectorAll('button').forEach(b=>{
          b.onclick=()=>{
            wiz.config[b.dataset.name].splice(b.dataset.i,1);
            renderSections(b.dataset.name);
          };
        });
      }
    }

    renderCohorts(); renderSubmissionBundles(); renderReviewBundles();
  </script>
</body>
</html>