# file: bundles-v26.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Configuration Hub</title>
  <style>
    :root {
      --brand-blue: #1589ee;
      --dark-blue: #16325c;
      --light-gray: #f4f6f9;
      --border-gray: #d8dde6;
      --text-dark: #1a1a1a;
      --text-light: #63737a;
      --font: Arial, sans-serif;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; font-family: var(--font); background: var(--light-gray); color: var(--text-dark); }
    .app-container { display: flex; flex-direction: column; height: 100%; }
    header { background: var(--dark-blue); color: white; padding: 0 1em; display: flex; align-items: center; height: 50px; justify-content: space-between; }
    header h1 { font-size: 1.2em; }
    .body { flex: 1; display: flex; overflow: hidden; }
    nav { width: 220px; background: var(--brand-blue); display: flex; flex-direction: column; }
    nav a { color: white; text-decoration: none; padding: 1em; }
    nav a.active, nav a:hover { background: var(--dark-blue); }
    .main { flex: 1; overflow-y: auto; padding: 1em; }
    .section { display: none; }
    .section.active { display: block; }
    .card { background: white; border: 1px solid var(--border-gray); border-radius: 4px; padding: 1em; margin-bottom: 1em; }
    h2 { margin-bottom: 0.5em; color: var(--dark-blue); }
    label { display: block; margin: 0.5em 0 0.25em; font-weight: bold; }
    input[type="text"], textarea, select, input[type="number"], input[type="date"], input[type="url"], input[type="datetime-local"] { width: 100%; padding: 0.5em; border: 1px solid var(--border-gray); border-radius: 3px; }
    textarea { resize: vertical; height: 80px; }
    button { margin-top: 0.5em; background: var(--brand-blue); color: white; border: none; padding: 0.5em 1em; border-radius: 3px; cursor: pointer; }
    button.delete { background: #d9534f; margin-left: 0.5em; }
    button.update { background: #ffc107; color: #1a1a1a; margin-left: 0.5em; }
    table { width: 100%; border-collapse: collapse; margin-top: 0.5em; }
    th, td { border: 1px solid var(--border-gray); padding: 0.5em; text-align: left; }
    th { background: var(--light-gray); }
    .search-input { width: calc(100% - 2px); margin-bottom: 0.5em; }
    .wizard-overlay { position: fixed; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.4); display: none; align-items: center; justify-content: center; z-index:100; }
    .wizard-content { background: white; padding: 1em; border-radius: 5px; width: 700px; max-height: 90%; overflow-y: auto; }
    .wizard-step { display: none; }
    .wizard-step.active { display: block; }
    .wizard-buttons { text-align: right; margin-top: 1em; }
    .wizard-buttons button { margin-left: 0.5em; }
    .order-list { list-style: none; padding: 0; }
    .order-list li { margin: 0.25em 0; display: flex; justify-content: space-between; align-items: center; background: var(--light-gray); padding: 0.5em; border-radius: 3px; }
    .order-btn { background: transparent; border: none; cursor: pointer; color: var(--brand-blue); margin-left: 0.5em; }
    .error { color: #d9534f; font-size: 0.9em; margin-top: 0.25em; }
    .flex { display: flex; gap:1em; }
    .flex-column { display: flex; flex-direction: column; }
    .toggle-switch { position: relative; width: 50px; display: inline-block; }
    .toggle-switch input { display:none; }
    .slider { position: absolute; cursor: pointer; top:0; left:0; right:0; bottom:0; background-color: #ccc; transition:.4s; border-radius: 34px; }
    .slider:before { position: absolute; content: ""; height: 22px; width: 22px; left:4px; bottom:4px; background-color:white; transition:.4s; border-radius: 50%; }
    input:checked + .slider { background-color: var(--brand-blue); }
    input:checked + .slider:before { transform: translateX(26px); }
  </style>
</head>
<body>
  <div class="app-container">
    <header>
      <h1>Configuration Hub</h1>
      <div>User: admin | <a href="#" style="color:white;text-decoration:underline;">Logout</a></div>
    </header>
    <div class="body">
      <nav>
        <a href="#" data-target="tenents">Tenents</a>
        <a href="#" data-target="submission-library" class="active">Submission Form Library</a>
        <a href="#" data-target="review-library">Review Form Library</a>
        <a href="#" data-target="cohorts">Cohorts</a>
        <a href="#" data-target="bundles">Submission Bundles</a>
        <a href="#" data-target="rbundles">Review Bundles</a>
        <a href="#" data-target="deliverables">Deliverables</a>
      </nav>
      <div class="main">
        <section id="tenents" class="section">
          <h2>Manage Tenents</h2>
          <button id="open-tenants-wizard">New Tenent</button>
          <button id="delete-selected-tenants">Delete Selected</button>
          <div class="card">
            <label for="tenants-grid-search">Search Tenents</label>
            <input type="text" id="tenants-grid-search" class="search-input" placeholder="Search tenents...">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="tenants-select-all"></th>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="tenants-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="submission-library" class="section active">
          <h2>Manage Submission Form Library</h2>
          <button id="open-lib-wizard">New Submission Form</button>
          <button id="delete-selected-sub">Delete Selected</button>
          <div class="card">
            <label for="submission-grid-search">Search Forms</label>
            <input type="text" id="submission-grid-search" class="search-input" placeholder="Search...">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="sub-select-all"></th>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Endpoint URL</th>
                  <th>Exit Event</th>
                  <th>API Auth Type</th>
                  <th>API Features</th>
                  <th>Schema</th>
                  <th>Validation Status</th>
                  <th>Options</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="submission-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="review-library" class="section">
          <h2>Manage Review Form Library</h2>
          <button id="open-rlib-wizard">New Review Form</button>
          <button id="delete-selected-rev">Delete Selected</button>
          <div class="card">
            <label for="review-grid-search">Search Forms</label>
            <input type="text" id="review-grid-search" class="search-input" placeholder="Search...">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="rev-select-all"></th>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Endpoint URL</th>
                  <th>Exit Event</th>
                  <th>API Auth Type</th>
                  <th>API Features</th>
                  <th>Schema</th>
                  <th>Validation Status</th>
                  <th>Options</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="review-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="cohorts" class="section">
          <h2>Manage Cohorts</h2>
          <button id="open-cohort-wizard">New Cohort</button>
          <button id="delete-selected-cohort">Delete Selected</button>
          <div class="card">
            <table>
              <thead><tr><th><input type="checkbox" id="cohort-select-all"></th><th>Name</th><th>Description</th><th>Tags</th><th>Program</th><th>Resource Type</th><th># Resources</th><th>Actions</th></tr></thead>
              <tbody id="cohort-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="bundles" class="section">
          <h2>Manage Submission Bundles</h2>
          <button id="open-bundle-wizard">New Bundle</button>
          <button id="delete-selected-bundle">Delete Selected</button>
          <div class="card">
            <label for="bundle-grid-search">Search Bundles</label>
            <input type="text" id="bundle-grid-search" class="search-input" placeholder="Search bundles...">
            <table>
              <thead><tr><th><input type="checkbox" id="bundle-select-all"></th><th>Name</th><th>Description</th><th>Program</th><th>Tags</th><th># Submission Forms</th><th>Review Enabled</th><th># Review Forms</th><th>Actions</th></tr></thead>
              <tbody id="bundle-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="rbundles" class="section">
          <h2>Manage Review Bundles</h2>
          <button id="open-rbundle-wizard">New Review Bundle</button>
          <button id="delete-selected-rbundle">Delete Selected</button>
          <div class="card">
            <label for="rbundle-grid-search">Search Bundles</label>
            <input type="text" id="rbundle-grid-search" class="search-input" placeholder="Search bundles...">
            <table>
              <thead><tr><th><input type="checkbox" id="rbundle-select-all"></th><th>Name</th><th>Description</th><th>Program</th><th>Tags</th><th># Submission Forms</th><th>Review Enabled</th><th># Review Forms</th><th>Actions</th></tr></thead>
              <tbody id="rbundle-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="deliverables" class="section">
          <h2>Manage Deliverables</h2>
          <button id="open-deliverable-wizard">New Deliverable</button>
          <button id="delete-selected-del">Delete Selected</button>
          <div class="card">
            <label for="deliverable-grid-search">Search Deliverables</label>
            <input type="text" id="deliverable-grid-search" class="search-input" placeholder="Search...">
            <table>
              <thead><tr><th><input type="checkbox" id="del-select-all"></th><th>Name</th><th>Cohort</th><th>Bundle</th><th>Schedule</th><th>Next Run</th><th>Status</th><th>Actions</th></tr></thead>
              <tbody id="deliverable-grid"></tbody>
            </table>
          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- Tenent Wizard -->
  <div id="tenants-wizard-overlay" class="wizard-overlay">
    <div class="wizard-content">
      <h3 id="tenants-wizard-title">New Tenent</h3>
      <div id="tenant-step-1" class="wizard-step active">
        <h4>Step 1: Basic Info</h4>
        <label for="tenant-name">Name *</label>
        <input type="text" id="tenant-name"><span class="error" id="tenant-name-error"></span>
        <label for="tenant-desc">Description</label>
        <textarea id="tenant-desc"></textarea>
      </div>
      <div id="tenant-step-2" class="wizard-step">
        <h4>Step 2: Review & Finish</h4>
        <div id="tenant-summary"></div>
      </div>
      <div class="wizard-buttons">
        <button id="tenant-cancel">Cancel</button>
        <button id="tenant-prev" style="display:none;">Prev</button>
        <button id="tenant-next">Next</button>
        <button id="tenant-finish" style="display:none;">Finish</button>
      </div>
    </div>
  </div>

  <!-- Submission Form Wizard -->
  <div id="lib-wizard-overlay" class="wizard-overlay">
    <div class="wizard-content">
      <h3 id="lib-wizard-title">New Submission Form</h3>
      <div id="lib-step-1" class="wizard-step active">
        <h4>Step 1: Metadata</h4>
        <div class="flex-column">
          <label for="lib-name">Name *</label>
          <input type="text" id="lib-name"><span class="error" id="lib-name-error"></span>
          <label for="lib-desc">Description</label>
          <textarea id="lib-desc"></textarea>
          <label for="lib-endpoint">Endpoint URL *</label>
          <input type="url" id="lib-endpoint"><span class="error" id="lib-endpoint-error"></span>
          <label for="lib-exit">Exit Event</label>
          <input type="text" id="lib-exit">
          <label for="lib-auth">Auth Type *</label>
          <select id="lib-auth"><option value="">Select</option><option>API Key</option><option>OAuth2</option></select><span class="error" id="lib-auth-error"></span>
          <label>API Features</label>
          <table id="lib-features-table">
            <thead>
              <tr><th>Feature</th><th>Verb</th><th>Endpoint</th></tr>
            </thead>
            <tbody></tbody>
          </table>
          <label for="lib-schema">Schema *</label>
          <select id="lib-schema"><option value="">Select</option><option>schema1.json</option><option>schema2.json</option></select><span class="error" id="lib-schema-error"></span>
        </div>
      </div>
      <div id="lib-step-2" class="wizard-step">
        <h4>Step 2: Validation</h4>
        <p>Review metadata and run validation tests:</p>
        <div id="lib-review"></div>
        <button id="lib-run-tests">Run Validation Tests</button>
        <div id="lib-test-status"></div>
      </div>
      <div class="wizard-buttons">
        <button id="lib-cancel">Cancel</button>
        <button id="lib-prev" style="display:none;">Prev</button>
        <button id="lib-next">Next</button>
        <button id="lib-finish" style="display:none;">Finish</button>
      </div>
    </div>
  </div>

  <!-- Review Form Wizard -->
  <div id="rlib-wizard-overlay" class="wizard-overlay">
    <div class="wizard-content">
      <h3 id="rlib-wizard-title">New Review Form</h3>
      <div id="rlib-step-1" class="wizard-step active">
        <h4>Step 1: Metadata</h4>
        <div class="flex-column">
          <label for="rlib-name">Name *</label>
          <input type="text" id="rlib-name"><span class="error" id="rlib-name-error"></span>
          <label for="rlib-desc">Description</label>
          <textarea id="rlib-desc"></textarea>
          <label for="rlib-endpoint">Endpoint URL *</label>
          <input type="url" id="rlib-endpoint"><span class="error" id="rlib-endpoint-error"></span>
          <label for="rlib-exit">Exit Event</label>
          <input type="text" id="rlib-exit">
          <label for="rlib-auth">Auth Type *</label>
          <select id="rlib-auth"><option value="">Select</option><option>API Key</option><option>OAuth2</option></select><span class="error" id="rlib-auth-error"></span>
          <label>API Features</label>
          <table id="rlib-features-table">
            <thead>
              <tr><th>Feature</th><th>Verb</th><th>Endpoint</th></tr>
            </thead>
            <tbody></tbody>
          </table>
          <label for="rlib-schema">Schema *</label>
          <select id="rlib-schema"><option value="">Select</option><option>schemaA.json</option><option>schemaB.json</option></select><span class="error" id="rlib-schema-error"></span>
        </div>
      </div>
      <div id="rlib-step-2" class="wizard-step">
        <h4>Step 2: Validation</h4>
        <p>Review metadata and run validation tests:</p>
        <div id="rlib-review"></div>
        <button id="rlib-run-tests">Run Validation Tests</button>
        <div id="rlib-test-status"></div>
      </div>
      <div class="wizard-buttons">
        <button id="rlib-cancel">Cancel</button>
        <button id="rlib-prev" style="display:none;">Prev</button>
        <button id="rlib-next">Next</button>
        <button id="rlib-finish" style="display:none;">Finish</button>
      </div>
    </div>
  </div>

  <!-- Cohort Wizard -->
  <div id="cohort-wizard-overlay" class="wizard-overlay">
    <div class="wizard-content">
      <h3 id="cohort-wizard-title">New Cohort</h3>
      <div id="cohort-step-1" class="wizard-step active">
        <h4>Step 1: Basic Info</h4>
        <label for="cohort-name">Name *</label>
        <input type="text" id="cohort-name"><span class="error" id="cohort-name-error"></span>
        <label for="cohort-desc">Description</label>
        <textarea id="cohort-desc"></textarea>
        <label for="cohort-tags">Tags (comma separated)</label>
        <input type="text" id="cohort-tags">
      </div>
      <div id="cohort-step-2" class="wizard-step">
        <h4>Step 2: Program & Resource Type</h4>
        <label for="cohort-prog">Program *</label>
        <select id="cohort-prog"><option value="">Select</option><option>330</option><option>LGP</option><option>LAL</option></select><span class="error" id="cohort-prog-error"></span>
        <label for="cohort-type">Resource Type *</label>
        <select id="cohort-type"><option value="">Select</option><option>applications</option><option>awards</option><option>organizations</option></select><span class="error" id="cohort-type-error"></span>
      </div>
      <div id="cohort-step-3" class="wizard-step">
        <h4>Step 3: Pick Resources</h4>
        <label for="cohort-entities-search">Search Resources</label>
        <input type="text" id="cohort-entities-search" class="search-input">
        <div class="flex">
          <div style="flex:1;">
            <h5>Available</h5>
            <ul id="cohort-entities-available" class="order-list"></ul>
          </div>
          <div style="flex:1;">
            <h5>Selected</h5>
            <ul id="cohort-entities-selected" class="order-list"></ul>
          </div>
        </div>
      </div>
      <div id="cohort-step-4" class="wizard-step">
        <h4>Step 4: Review & Finish</h4>
        <div id="cohort-summary"></div>
      </div>
      <div class="wizard-buttons">
        <button id="cohort-cancel">Cancel</button>
        <button id="cohort-prev" style="display:none;">Prev</button>
        <button id="cohort-next">Next</button>
        <button id="cohort-finish" style="display:none;">Finish</button>
      </div>
    </div>
  </div>

  <!-- Bundle Wizard -->
  <!-- existing wizards unchanged -->

  <script>
    document.querySelectorAll('nav a').forEach(a=>{
      a.onclick=e=>{
        e.preventDefault();
        document.querySelectorAll('nav a').forEach(x=>x.classList.remove('active'));
        a.classList.add('active');
        document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
        document.getElementById(a.dataset.target).classList.add('active');
      };
    });

    const defaultFeatures = [
      {name:'Create Draft', verb:'POST', endpoint:'/api/forms'},
      {name:'Update Draft', verb:'PUT', endpoint:'/api/forms/{formId}'},
      {name:'Publish', verb:'POST', endpoint:'/api/forms/{formId}/publish'},
      {name:'List Forms', verb:'GET', endpoint:'/api/forms?type={submission|review}&status={draft|published}&page={n}&size={m}'},
      {name:'Get Form Details', verb:'GET', endpoint:'/api/forms/{formId}'},
      {name:'Delete Form', verb:'DELETE', endpoint:'/api/forms/{formId}'},
      {name:'List Versions', verb:'GET', endpoint:'/api/forms/{formId}/versions'},
      {name:'Get Version Details', verb:'GET', endpoint:'/api/forms/{formId}/versions/{version}'},
      {name:'Restore Version', verb:'POST', endpoint:'/api/forms/{formId}/versions/{version}/restore'},
      {name:'Health', verb:'GET', endpoint:'/api/health'}
    ];
    const submissionLibrary = [ /* existing data */ ];
    const reviewLibrary = [ /* existing data */ ];
    const dataStore = { /* existing dataStore */ };
    let tenants = [
      {id:'1', name:'HRSA\\BPHC', desc:'Bureau of Primary Health Care'},
      {id:'2', name:'HRSA\\HAB', desc:'HIV/AIDS Bureau'},
      {id:'3', name:'HRSA\\BHW', desc:'Bureau of Health Workforce'}
    ];
    let cohorts = [ /* existing cohorts */ ];
    let bundles = [ /* existing bundles */ ];
    let rbundles = JSON.parse(JSON.stringify(bundles));
    let deliverables = [ /* existing deliverables */ ];

    function renderGrid(grid, data, cols){
      grid.innerHTML='';
      data.forEach(item=>{
        const tr=document.createElement('tr');
        let html=`<td><input type="checkbox" data-name="${item.name}"></td>`;
        cols.forEach(c=>{
          const v=typeof c==='function'?c(item):item[c]||'';
          html+=`<td>${v}</td>`;
        });
        html+=`<td><button class="update" data-name="${item.name}">Update</button><button class="delete" data-name="${item.name}">Delete</button></td>`;
        tr.innerHTML=html; grid.appendChild(tr);
      });
    }

    // Tenents rendering
    const tenantsGrid=document.getElementById('tenants-grid'), deleteSelectedTenants=document.getElementById('delete-selected-tenants');
    function renderTenants(){
      renderGrid(tenantsGrid, tenants, [
        'name',
        item=>item.desc
      ]);
      deleteSelectedTenants.disabled=true;
      document.getElementById('tenants-select-all').checked=false;
      tenantsGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.onchange=()=>{
        deleteSelectedTenants.disabled=!tenantsGrid.querySelectorAll('input[type="checkbox"]:checked').length;
      });
      tenantsGrid.querySelectorAll('.delete').forEach(btn=>{
        btn.onclick=()=>{
          const n=btn.dataset.name;
          if(confirm(`Delete tenent "${n}"?`)){
            const i=tenants.findIndex(x=>x.name===n);
            tenants.splice(i,1);
            renderTenants();
          }
        };
      });
      tenantsGrid.querySelectorAll('.update').forEach(btn=>{
        btn.onclick=()=>openTenantsWizard('edit', btn.dataset.name);
      });
    }
    renderTenants();

    document.getElementById('tenants-select-all').onclick=e=>{
      tenantsGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.checked=e.target.checked);
      deleteSelectedTenants.disabled=!e.target.checked;
    };
    deleteSelectedTenants.onclick=()=>{
      const sel=Array.from(tenantsGrid.querySelectorAll('input[type="checkbox"]:checked')).map(cb=>cb.dataset.name);
      if(sel.length && confirm(`Delete ${sel.length} selected?`)){
        sel.forEach(n=>{
          const i=tenants.findIndex(x=>x.name===n);
          tenants.splice(i,1);
        });
        renderTenants();
      }
    };
    document.getElementById('tenants-grid-search').oninput=()=>{
      const q=document.getElementById('tenants-grid-search').value.toLowerCase();
      Array.from(tenantsGrid.children).forEach(tr=>{
        tr.style.display=tr.innerText.toLowerCase().includes(q)?'table-row':'none';
      });
    };

    // Tenant Wizard logic
    let tenantState={}, tenantMode='create';
    const twOverlay=document.getElementById('tenants-wizard-overlay');
    function openTenantsWizard(mode,name){
      tenantMode=mode; tenantState={};
      twOverlay.style.display='flex';
      document.getElementById('tenants-wizard-title').innerText= mode==='edit'?'Edit Tenent':'New Tenent';
      showTenantStep(1);
      document.getElementById('tenant-name').value='';
      document.getElementById('tenant-desc').value='';
      document.getElementById('tenant-name-error').innerText='';
      if(mode==='edit'){
        const item=tenants.find(x=>x.name===name);
        tenantState=JSON.parse(JSON.stringify(item));
        document.getElementById('tenant-name').value=item.name;
        document.getElementById('tenant-desc').value=item.desc;
      }
    }
    document.getElementById('open-tenants-wizard').onclick=()=>openTenantsWizard('create');
    document.getElementById('tenant-cancel').onclick=()=>twOverlay.style.display='none';
    function showTenantStep(n){
      twOverlay.querySelectorAll('.wizard-step').forEach((el,i)=>el.classList.toggle('active',i+1===n));
      document.getElementById('tenant-prev').style.display=n>1?'inline-block':'none';
      document.getElementById('tenant-next').style.display=n<2?'inline-block':'none';
      document.getElementById('tenant-finish').style.display=n===2?'inline-block':'none';
      twOverlay.dataset.step=n;
      if(n===2) showTenantSummary();
    }
    document.getElementById('tenant-next').onclick=()=>{
      let ok=true;
      if(!document.getElementById('tenant-name').value.trim()){
        document.getElementById('tenant-name-error').innerText='Required'; ok=false;
      } else document.getElementById('tenant-name-error').innerText='';
      if(ok){
        tenantState.name=document.getElementById('tenant-name').value.trim();
        tenantState.desc=document.getElementById('tenant-desc').value;
        showTenantStep(2);
      }
    };
    document.getElementById('tenant-prev').onclick=()=>showTenantStep(parseInt(twOverlay.dataset.step)-1);
    function showTenantSummary(){
      const sum=document.getElementById('tenant-summary');
      sum.innerHTML=`
        <p><strong>Name:</strong> ${tenantState.name}</p>
        <p><strong>Description:</strong> ${tenantState.desc}</p>`;
    }
    document.getElementById('tenant-finish').onclick=()=>{
      tenantState.id=tenantMode==='create'?Date.now().toString():tenantState.id;
      if(tenantMode==='create') tenants.push(tenantState);
      twOverlay.style.display='none';
      renderTenants();
    };

    // Submission, Review, Bundles, RBundles, Cohorts, Deliverables rendering and wizards unchanged
  </script>
</body>
</html>