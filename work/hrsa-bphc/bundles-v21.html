# file: bundles-v20.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Configuration Hub</title>
  <style>
    :root {
      --brand-blue: #1589ee;
      --dark-blue: #16325c;
      --light-gray: #f4f6f9;
      --border-gray: #d8dde6;
      --text-dark: #1a1a1a;
      --text-light: #63737a;
      --font: Arial, sans-serif;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; font-family: var(--font); background: var(--light-gray); color: var(--text-dark); }
    .app-container { display: flex; flex-direction: column; height: 100%; }
    header { background: var(--dark-blue); color: white; padding: 0 1em; display: flex; align-items: center; height: 50px; justify-content: space-between; }
    header h1 { font-size: 1.2em; }
    .body { flex: 1; display: flex; overflow: hidden; }
    nav { width: 220px; background: var(--brand-blue); display: flex; flex-direction: column; }
    nav a { color: white; text-decoration: none; padding: 1em; }
    nav a.active, nav a:hover { background: var(--dark-blue); }
    .main { flex: 1; overflow-y: auto; padding: 1em; }
    .section { display: none; }
    .section.active { display: block; }
    .card { background: white; border: 1px solid var(--border-gray); border-radius: 4px; padding: 1em; margin-bottom: 1em; }
    h2 { margin-bottom: 0.5em; color: var(--dark-blue); }
    label { display: block; margin: 0.5em 0 0.25em; font-weight: bold; }
    input[type="text"], textarea, select, input[type="number"], input[type="date"], input[type="url"], input[type="datetime-local"] { width: 100%; padding: 0.5em; border: 1px solid var(--border-gray); border-radius: 3px; }
    textarea { resize: vertical; height: 80px; }
    button { margin-top: 0.5em; background: var(--brand-blue); color: white; border: none; padding: 0.5em 1em; border-radius: 3px; cursor: pointer; }
    button.delete { background: #d9534f; margin-left: 0.5em; }
    button.update { background: #ffc107; color: #1a1a1a; margin-left: 0.5em;}
    table { width: 100%; border-collapse: collapse; margin-top: 0.5em; }
    th, td { border: 1px solid var(--border-gray); padding: 0.5em; text-align: left; vertical-align: top; }
    th { background: var(--light-gray); }
    .search-input { width: calc(100% - 2px); margin-bottom: 0.5em; }
    .wizard-overlay { position: fixed; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.4); display: none; align-items: center; justify-content: center; }
    .wizard-content { background: white; padding: 1em; border-radius: 5px; width: 600px; max-height: 90%; overflow-y: auto; }
    .wizard-step { display: none; }
    .wizard-step.active { display: block; }
    .wizard-buttons { text-align: right; margin-top: 1em; }
    .wizard-buttons button { margin-left: 0.5em; }
    .order-list { list-style: none; padding: 0; }
    .order-list li { margin: 0.25em 0; display: flex; justify-content: space-between; align-items: center; background: var(--light-gray); padding: 0.5em; border-radius: 3px; }
    .order-btn { background: transparent; border: none; cursor: pointer; color: var(--brand-blue); margin-left: 0.5em; }
    .error { color: #d9534f; font-size: 0.9em; margin-top: 0.25em; }
    .flex { display: flex; gap:1em; }
    .flex-column { display: flex; flex-direction: column; }
  </style>
</head>
<body>
  <div class="app-container">
    <header>
      <h1>Configuration Hub</h1>
      <div>User: admin | <a href="#" style="color:white;text-decoration:underline;">Logout</a></div>
    </header>
    <div class="body">
      <nav>
        <a href="#" data-target="submission-library" class="active">Submission Library</a>
        <a href="#" data-target="review-library">Review Library</a>
        <a href="#" data-target="cohorts">Cohorts</a>
        <a href="#" data-target="bundles">Submission Bundles</a>
        <a href="#" data-target="bundles">Review Bundles</a>
        <a href="#" data-target="deliverables">Deliverables</a>
      </nav>
      <div class="main">
        <section id="submission-library" class="section active">
          <h2>Manage Submission Form Library</h2>
          <button id="open-lib-wizard">New Submission Form</button>
          <button id="delete-selected-sub">Delete Selected</button>
          <div class="card">
            <label for="submission-grid-search">Search Forms</label>
            <input type="text" id="submission-grid-search" class="search-input" placeholder="Search...">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="sub-select-all"></th>
                  <th>Name</th>
                  <th>Features</th>
                  <th>Endpoint URL</th>
                  <th>Exit Event</th>
                  <th>API Auth Type</th>
                  <th>APIs</th>
                  <th>Schema (YAML)</th>
                  <th>Validation Status</th>
                  <th>Options</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="submission-grid"></tbody>
            </table>
          </div>
        </section>
        <section id="review-library" class="section">
          <h2>Manage Review Form Library</h2>
          <button id="open-rlib-wizard">New Review Form</button>
          <button id="delete-selected-rev">Delete Selected</button>
          <div class="card">
            <label for="review-grid-search">Search Forms</label>
            <input type="text" id="review-grid-search" class="search-input" placeholder="Search...">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="rev-select-all"></th>
                  <th>Name</th>
                  <th>Features</th>
                  <th>Endpoint URL</th>
                  <th>Exit Event</th>
                  <th>API Auth Type</th>
                  <th>APIs</th>
                  <th>Schema (YAML)</th>
                  <th>Validation Status</th>
                  <th>Options</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="review-grid"></tbody>
            </table>
          </div>
        </section>
        <!-- other sections unchanged -->
        <section id="cohorts" class="section">
          <!-- unchanged -->
        </section>
        <section id="bundles" class="section">
          <!-- unchanged -->
        </section>
        <section id="deliverables" class="section">
          <!-- unchanged -->
        </section>
      </div>
    </div>
  </div>

  <!-- Wizards unchanged -->
  <!-- Submission Wizard -->
  <div id="lib-wizard-overlay" class="wizard-overlay"> ... </div>
  <!-- Review Wizard -->
  <div id="rlib-wizard-overlay" class="wizard-overlay"> ... </div>
  <!-- Cohort Wizard -->
  <div id="cohort-wizard-overlay" class="wizard-overlay"> ... </div>
  <!-- Bundle Wizard -->
  <div id="bundle-wizard-overlay" class="wizard-overlay"> ... </div>
  <!-- Deliverable Wizard -->
  <div id="deliverable-wizard-overlay" class="wizard-overlay"> ... </div>

  <script>
    // Navigation unchanged
    document.querySelectorAll('nav a').forEach(a=>{
      a.onclick=e=>{
        e.preventDefault();
        document.querySelectorAll('nav a').forEach(x=>x.classList.remove('active'));
        a.classList.add('active');
        document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
        document.getElementById(a.dataset.target).classList.add('active');
      };
    });

    // Data Stores unchanged
    const submissionLibrary = [
      {id:'1',name:'Form 1A',endpoint:'https://api.example.com/forms/1A',auth:'API Key',schema:'form1A-schema.json',lastValidationStatus:'Passed'},
      {id:'2',name:'Consolidated Budget',endpoint:'https://api.example.com/forms/budget',auth:'OAuth2',schema:'budget-schema.json',lastValidationStatus:'Passed'},
      {id:'3',name:'BPHC Post Award Progress Report (FQHC)',endpoint:'https://api.hrsa.gov/forms/bphc-progress',auth:'API Key',schema:'bphc-progress-schema-v1.json',lastValidationStatus:'Pending'},
      {id:'4',name:'Emergency Prep Report',endpoint:'https://api.example.com/forms/emergency',auth:'OAuth2',schema:'emergency-schema.json',lastValidationStatus:'Failed'}
    ];
    const reviewLibrary = [
      {id:'1',name:'Scope PO Review',endpoint:'https://api.example.com/reviews/scope-po',auth:'API Key',schema:'scope-po-schema.json',lastValidationStatus:'Passed'},
      {id:'2',name:'Environmental Review',endpoint:'https://api.example.com/reviews/environmental',auth:'OAuth2',schema:'env-schema.json',lastValidationStatus:'Pending'},
      {id:'3',name:'BPHC Progress Review',endpoint:'https://api.hrsa.gov/reviews/bphc-progress',auth:'API Key',schema:'bphc-review-schema-v1.json',lastValidationStatus:'Passed'}
    ];
    // other stores unchanged

    function renderGrid(grid, data, cols){
      grid.innerHTML='';
      data.forEach(item=>{
        const tr=document.createElement('tr');
        let html=`<td><input type="checkbox" data-name="${item.name}"></td>`;
        cols.forEach(c=>{
          const v=typeof c==='function'?c(item):item[c]||'';
          html+=`<td>${v}</td>`;
        });
        html+=`<td><button class="update" data-name="${item.name}">Update</button><button class="delete" data-name="${item.name}">Delete</button></td>`;
        tr.innerHTML=html; grid.appendChild(tr);
      });
    }

    // Submission
    const subGrid=document.getElementById('submission-grid'), subSearch=document.getElementById('submission-grid-search'), deleteSelectedSub=document.getElementById('delete-selected-sub');
    function renderSubmissionLibrary(){
      const q=subSearch.value.toLowerCase();
      const filtered=submissionLibrary.filter(f=>f.name.toLowerCase().includes(q));
      renderGrid(subGrid,filtered,[
        'name',
        item=>item.features||'',
        'endpoint',
        item=>item.exitEvent||'',
        item=>'',
        item=>item.auth,
        item=>`<ul style="padding-left:1em;margin:0;"><li>POST /api/forms</li><li>PUT /api/forms/{formId}</li><li>POST /api/forms/{formId}/publish</li><li>GET /api/forms?type=submission&status={draft|published}&page={n}&size={m}</li><li>GET /api/forms/{formId}</li><li>DELETE /api/forms/{formId}</li><li>GET /api/forms/{formId}/versions</li><li>GET /api/forms/{formId}/versions/{version}</li><li>POST /api/forms/{formId}/versions/{version}/restore</li></ul>`,
        'schema',
        'lastValidationStatus',
        item=>item.options||''
      ]);
      deleteSelectedSub.disabled=true; document.getElementById('sub-select-all').checked=false;
      subGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.onchange=()=>deleteSelectedSub.disabled=!subGrid.querySelectorAll('input[type="checkbox"]:checked').length);
      subGrid.querySelectorAll('.delete').forEach(btn=>{
        btn.onclick=()=>{const n=btn.dataset.name; if(confirm(`Delete submission form "${n}"?`)){const i=submissionLibrary.findIndex(x=>x.name===n);submissionLibrary.splice(i,1);renderSubmissionLibrary();}};
      });
      subGrid.querySelectorAll('.update').forEach(btn=>btn.onclick=()=>openLibWizard('edit',btn.dataset.name));
    }
    subSearch.oninput=renderSubmissionLibrary; renderSubmissionLibrary();
    document.getElementById('sub-select-all').onclick=e=>{subGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.checked=e.target.checked);deleteSelectedSub.disabled=!e.target.checked;};
    deleteSelectedSub.onclick=()=>{
      const sel=Array.from(subGrid.querySelectorAll('input[type="checkbox"]:checked')).map(cb=>cb.dataset.name);
      if(sel.length&&confirm(`Delete ${sel.length} selected?`)){sel.forEach(n=>{const i=submissionLibrary.findIndex(x=>x.name===n);submissionLibrary.splice(i,1);});renderSubmissionLibrary();}
    };

    // Review
    const revGrid=document.getElementById('review-grid'), revSearch=document.getElementById('review-grid-search'), deleteSelectedRev=document.getElementById('delete-selected-rev');
    function renderReviewLibrary(){
      const q=revSearch.value.toLowerCase();
      const filtered=reviewLibrary.filter(f=>f.name.toLowerCase().includes(q));
      renderGrid(revGrid,filtered,[
        'name',
        item=>item.features||'',
        'endpoint',
        item=>item.exitEvent||'',
        item=>'',
        item=>item.auth,
        item=>`<ul style="padding-left:1em;margin:0;"><li>POST /api/forms</li><li>PUT /api/forms/{formId}</li><li>POST /api/forms/{formId}/publish</li><li>GET /api/forms?type=review&status={draft|published}&page={n}&size={m}</li><li>GET /api/forms/{formId}</li><li>DELETE /api/forms/{formId}</li><li>GET /api/forms/{formId}/versions</li><li>GET /api/forms/{formId}/versions/{version}</li><li>POST /api/forms/{formId}/versions/{version}/restore</li></ul>`,
        'schema',
        'lastValidationStatus',
        item=>item.options||''
      ]);
      deleteSelectedRev.disabled=true; document.getElementById('rev-select-all').checked=false;
      revGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.onchange=()=>deleteSelectedRev.disabled=!revGrid.querySelectorAll('input[type="checkbox"]:checked').length);
      revGrid.querySelectorAll('.delete').forEach(btn=>{btn.onclick=()=>{const n=btn.dataset.name;if(confirm(`Delete review "${n}"?`)){const i=reviewLibrary.findIndex(x=>x.name===n);reviewLibrary.splice(i,1);renderReviewLibrary();}}});
      revGrid.querySelectorAll('.update').forEach(btn=>btn.onclick=()=>openRLibWizard('edit',btn.dataset.name));
    }
    revSearch.oninput=renderReviewLibrary; renderReviewLibrary();
    document.getElementById('rev-select-all').onclick=e=>{revGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.checked=e.target.checked);deleteSelectedRev.disabled=!e.target.checked;};
    deleteSelectedRev.onclick=()=>{
      const sel=Array.from(revGrid.querySelectorAll('input[type="checkbox"]:checked')).map(cb=>cb.dataset.name);
      if(sel.length&&confirm(`Delete ${sel.length} selected?`)){sel.forEach(n=>{const i=reviewLibrary.findIndex(x=>x.name===n);reviewLibrary.splice(i,1);});renderReviewLibrary();}
    };

    // other renderers and wizard logic unchanged
  </script>
</body>
</html>